
<!--<div class ="text-center spinner" *ngIf = "!this.predictionVisible">
  <div class="spinner-border text-primary"  style="width: 10rem; height: 10rem;"  role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>-->
<div class="container"  *ngIf="this.predictionResult != undefined">
  <div class="row">
    <div class="card w-100" style="width: 18rem;" *ngIf="this.predictionResult != undefined  && this.predictionResult['external-validation']">
      <div class="card-body"> 
        <div class="row ml-2">
            <small class="h2 text-muted"><u>Fitting</u></small>
        </div>
        <div class="row align-items-center">
          <div class="col-2 mt-1">
            <table class="table table-sm mt-4">
              <tbody>
                <tr>
                  <td class="text-left text-capitalize" data-toggle="tooltip" data-placement="left" title="{{modelValidationInfo['Sensitivity'][0]}}"><strong>Sensitivity:</strong></td>
                  <td class="text-right text-capitalize">{{modelValidationInfo['Sensitivity'][1]}}</td>
                </tr>
                <tr>
                  <td class="text-left text-capitalize" data-toggle="tooltip" data-placement="left" title="{{modelValidationInfo['Specificity'][0]}}"><strong>Specificity:</strong></td>
                  <td class="text-right text-capitalize">{{modelValidationInfo['Specificity'][1]}}</td>
                </tr>
                <tr>
                  <td class="text-left text-capitalize" data-toggle="tooltip" data-placement="left" title="{{modelValidationInfo['MCC'][0]}}"><strong>MCC:</strong></td>
                  <td class="text-right text-capitalize">{{modelValidationInfo['MCC'][1]}}</td>
                </tr>
              </tbody>
            </table> 
          </div>
          <div class="col-5">
            <!--CONFUSION MATRIX-->
            <app-confusion-matrix 
                  [TP] = "this.modelValidationInfo['TP'][1]"
                  [FP] = "this.modelValidationInfo['FP'][1]"
                  [FN] = "this.modelValidationInfo['FN'][1]"
                  [TN] = "this.modelValidationInfo['TN'][1]"
              ></app-confusion-matrix>                 
          </div>
          <div class="col-5">
            <div style="display: block">
              <canvas baseChart
                  [data]="polarAreaChartData"
                  [options]="polarChartOptions"
                  [labels]="polarAreaChartLabels"
                  [legend]="polarAreaLegend"
                  [colors]="polarAreaChartColors"
                  [chartType]="polarAreaChartType">
              </canvas>
            </div>
          </div>
        </div><!--row---->
      </div><!--body-->
    </div><!--card-->
  </div>
  <div class="row" *ngIf="this.predictionResult != undefined && this.predictionResult.warning">
    <div class="card w-100">
      <div class="card-body"> 
        <div class="alert alert-danger text-center" role="alert">
          {{this.predictionResult.warning}}
        </div>
      </div>
    </div>
  </div>
 
    <!--<div class="d-flex flex-row-reverse" *ngIf="this.predictionResult != undefined">
      
        <div class="btn-group" role="group" aria-label="Basic example">
          <button type="button" class="btn btn-raised btn-etransafe" (click)="savePDF()"><i class="far fa-file-pdf"></i>  PDF</button>
          <button type="button" class="btn btn-raised btn-etransafe" (click)="saveEXCEL()"><i class="fas fa-file-excel"></i>  Excel</button>
        </div>
      
    </div>-->
  <div class="row mt-3" *ngIf="this.predictionResult != undefined">
    <div class="card w-100">
      <div class="card-body">
        <table  id="prediction" class="table m-0 table-light">
          <thead>
            <tr>
              <th >Name</th>
              <th class="align-middle text-center">Mol</th>
              <th class="align-middle text-center" *ngIf="this.predictionResult.ymatrix">Value</th>
              <th class="align-middle text-center" *ngIf="this.predictionResult.values">Prediction</th>
              <th class="align-middle text-center" *ngIf="this.predictionResult.upper_limit">Upper limit</th>
              <th class="align-middle text-center" *ngIf="this.predictionResult.lower_limit">Lower limit</th>
              <th class="align-middle text-center" *ngIf="this.predictionResult.c0">Inactive</th>
              <th class="align-middle text-center" *ngIf="this.predictionResult.c1">Active</th>
              <th class="align-middle text-center" *ngIf="this.predictionResult.ensemble_c0">Ensemble Class 0</th>
              <th class="align-middle text-center" *ngIf="this.predictionResult.ensemble_c1">Ensemble Class 1</th>

            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let res of this.predictionResult.SMILES; let i=index">
              <td class="align-middle" >{{this.predictionResult.obj_nam[i]}}</td>
              <td class="align-middle text-center">
                <canvas #cmp id="{{i}}">{{this.predictionResult.SMILES[i]}}</canvas>
              </td>
              <td class="align-middle text-center" *ngIf="this.predictionResult.ymatrix" >{{this.predictionResult.ymatrix[i].toFixed(3)}}</td>
              <td class="align-middle text-center" *ngIf="this.predictionResult.values">{{this.predictionResult.values[i].toFixed(3)}}</td>
              <td class="align-middle text-center" *ngIf="this.predictionResult.upper_limit">{{this.predictionResult.upper_limit[i].toFixed(3)}}</td>
              <td class="align-middle text-center" *ngIf="this.predictionResult.lower_limit">{{this.predictionResult.lower_limit[i].toFixed(3)}}</td>
              <td class="align-middle text-center" *ngIf="this.predictionResult.c0">{{this.predictionResult.c0[i]}}</td>
              <td class="align-middle text-center" *ngIf="this.predictionResult.c1">{{this.predictionResult.c1[i]}}</td>
              <td class="align-middle text-center" *ngIf="this.predictionResult.ensemble_c0">{{this.predictionResult.ensemble_c0[i].toFixed(3)}}</td>
              <td class="align-middle text-center" *ngIf="this.predictionResult.ensemble_c1">{{this.predictionResult.ensemble_c1[i].toFixed(3)}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
