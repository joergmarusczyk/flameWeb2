
<hr class="my-0">

<app-manage-models></app-manage-models>
  <!-- Extra large modal -->
<div class ="text-center spinner" *ngIf = "!this.tableVisible">
  <div class="spinner-border text-primary"  style="width: 10rem; height: 10rem;"  role="status">
    <span class="sr-only">Loading...</span>
  </div>
</div>
<div class ="row ml-3 mr-3" [hidden] = "!this.tableVisible">
  <div class="col-12 scrolltable">
    <table id ="dataTableModels" class="table">
      <thead>
        <tr>
          <th width="5%" class="text-center"></th>
          <th width="5%"></th>
          <th width="30%">Name</th>
          <th width="10%">Version</th>
          <th width="10%">#Molecules</th>
          <th width="10%">#Variables</th>
          <th width="30%">Type</th>
         
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let key of objectKeys(model.listModels).sort()" 
          [ngClass]="{'selected': (model.listModels[key].name===this.model.name) && (model.listModels[key].version===this.model.version),
                      'version': model.listModels[key].version > 0}"
          (click)= "selectModel(model.listModels[key].name, model.listModels[key].version, model.listModels[key].trained,model.listModels[key].type)">
           <!--"{'background-color': style1 ? 'red' : (style2 ? 'blue' : null) }" fas fa-circle, fas fa-square -->
          <td class="text-center">
            <i class = "fas" [ngClass]="{'fa-grip-lines': model.listModels[key].type.indexOf('qualitative') > -1 ||
                                                        model.listModels[key].type.indexOf('majority') > -1,
                        'fa-circle': model.listModels[key].type.indexOf('quantitative') >-1 ||
                                     model.listModels[key].type.indexOf('mean') > -1 ||
                                     model.listModels[key].type.indexOf('median') > -1,
                        'fa-times': model.listModels[key].type == '-',
                        'faa-flash animated': this.model.trainig_models.includes(model.listModels[key].name + '-' + model.listModels[key].version)}"
                        [ngStyle]="{'color': this.model.trainig_models.includes(model.listModels[key].name + '-' + model.listModels[key].version) ? '#E69400' : (model.listModels[key].trained ? '#51cf66' : 'red' ) }" 
                        aria-hidden="true"></i> 
         
                        
          </td>
          <td scope="row" class="text-left">

            <button class="btn p-0" (click)="openValidation(model.listModels[key].name,model.listModels[key].version)"
              *ngIf="model.listModels[key].type != '-'">
                <i class="far fa-chart-bar" title="Validation" ></i>
            </button>

            <button *ngIf="model.listModels[key].type != '-'"
              class="btn p-0" 
              id ="collapse_{{model.listModels[key].name}}_{{model.listModels[key].version}}" 
              [ngbPopover]="popContent" [popoverTitle]="popTitle"
              placement="right"
              [autoClose]="'inside'"
              > <i class="far fa-eye" title="Quality" ></i>
            </button>
                
            <!-- Content poppover--> 
            <ng-template #popTitle>Info</ng-template>   
            <ng-template #popContent>
              <table class="table">
                <tbody>
                  <tr style ="border-bottom: 2px solid #B8DCED;" *ngFor="let key2 of objectKeys(model.listModels[key].quality)">
                    <td class="text-left"><strong>{{key2}}: </strong></td>
                    <td class="text-right">{{model.listModels[key].quality[key2]}}</td>
                  </tr>

                </tbody>
              </table>
            </ng-template>     
          </td>
          <td >{{model.listModels[key].name}}</td>
          <td>{{model.listModels[key].version}}</td>
          <td>{{model.listModels[key].numMols}}</td>
          <td>{{model.listModels[key].variables}}</td>
          <td class="text-capitalize">{{model.listModels[key].type}}</td>
        </tr>
      </tbody>
    </table>
  </div>



 



